<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>04</title>
    <link rel="stylesheet" href="../../css/main.css">
</head>
<body>
    <p><a href="../index.html">返回目录</a></p>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var btn = document.querySelector("#fade-btn")
        btn.addEventListener("click",function () {
            btn.disabled = true
            divAnimation()
        },false)
        function divAnimation() {
            if (btn.textContent == "淡出") {
                document.querySelector("#fade-obj").style.opacity = 1
                inAnimation()
            }else{
                outAnimation()
            }
        }
        function inAnimation() {
            var divOpacity = document.querySelector("#fade-obj").style.opacity
            if (divOpacity == 0) {
                clearTimeout(divGo)
                btn.textContent = "淡入"
                btn.disabled = false
            }else{
                document.querySelector("#fade-obj").style.opacity = (divOpacity*100 -1)/100
                console.log(divOpacity)
                var divGo = setTimeout(inAnimation,1000/60)
            }
        }
        function outAnimation() {
            var outOpacity = document.querySelector("#fade-obj").style.opacity
            if (outOpacity == 1) {
                clearTimeout(divGo)
                btn.textContent = "淡出"
                btn.disabled = false
            }else{
                document.querySelector("#fade-obj").style.opacity = (outOpacity*100 +1)/100
                console.log(outOpacity)
                var divGo = setTimeout(outAnimation,1000/60)
            }
        }

    </script>
</body>
</html>